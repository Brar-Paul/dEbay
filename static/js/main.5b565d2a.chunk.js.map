{"version":3,"sources":["components/market.png","components/Navbar.js","components/Home.js","components/Create.js","components/MyListedItems.js","components/MyPurchases.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","Navigation","web3Handler","account","Navbar","expand","bg","variant","Container","Brand","href","src","market","width","height","className","alt","Toggle","aria-controls","Collapse","id","Nav","Link","as","to","target","rel","Button","slice","onClick","moment","require","Home","marketplace","useState","loading","setLoading","listings","setListings","bid","setBid","signer","setSigner","loadMarketplaceListings","a","listingCount","toNumber","i","listing","auctionState","eq","fetch","nft","nftResponse","json","nftMetadata","nftAbi","result","provider","ethers","providers","Web3Provider","window","ethereum","getSigner","Contract","tokenURI","tokenId","uri","replace","response","metadata","image","convertedTime","unix","closingTime","price","parseFloat","utils","formatUnits","currentPrice","push","listingId","seller","name","description","time","bidOnListing","bidPrice","weth","ABI","adjustedPrice","parseEther","toString","approve","address","wait","useEffect","style","padding","length","Row","xs","md","lg","map","idx","Col","key","Card","Img","Body","color","Title","Text","Date","now","format","Footer","Form","Control","onChange","e","value","size","required","type","placeholder","Create","reserve","setReserve","setName","setDescription","startPrice","setStartPrice","closing","setClosing","setNft","setTokenId","createListing","nftInstance","reserveAsWei","startPriceAsWei","setApprovalForAll","role","maxWidth","MyListings","soldListings","setSoldListings","endAuction","loadMyListings","cancelAuction","cancelListing","allListings","indx","toLowerCase","reservePrice","bidCount","bidCounter","renderSoldListings","MyBids","bids","setBids","loadBids","buyer","App","setAccount","setMarketplace","request","method","accounts","on","chainId","location","reload","loadContracts","abi","Marketplace","marketplaceAddress","networkMapping","marketplaceInterface","Interface","display","justifyContent","alignItems","minHeight","Spinner","animation","path","element","Boolean","hostname","match","rootElement","document","getElementById","render","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.5b565d2a.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import {\n    Link\n} from \"react-router-dom\";\nimport { Navbar, Nav, Button, Container } from 'react-bootstrap'\nimport market from './market.png'\nimport React from 'react'\n\nconst Navigation = ({ web3Handler, account }) => {\n    return (\n        <Navbar expand=\"lg\" bg=\"secondary\" variant=\"dark\">\n            <Container>\n                <Navbar.Brand href=\"\">\n                    <img src={market} width=\"40\" height=\"40\" className=\"\" alt=\"\" />\n                    &nbsp; dEbay\n                </Navbar.Brand>\n                <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n                <Navbar.Collapse id=\"responsive-navbar-nav\">\n                    <Nav className=\"me-auto\">\n                        <Nav.Link as={Link} to=\"/dEbay\">Home</Nav.Link>\n                        <Nav.Link as={Link} to=\"/dEbay/create\">Create</Nav.Link>\n                        <Nav.Link as={Link} to=\"/dEbay/my-listed-items\">My Listed Items</Nav.Link>\n                        <Nav.Link as={Link} to=\"/dEbay/my-purchases\">My Bids</Nav.Link>\n                    </Nav>\n                    <Nav>\n                        {account ? (\n                            <Nav.Link\n                                href={`https://etherscan.io/address/${account}`}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"button nav-button btn-sm mx-4\">\n                                <Button variant=\"outline-light\">\n                                    {account.slice(0, 5) + '...' + account.slice(38, 42)}\n                                </Button>\n\n                            </Nav.Link>\n                        ) : (\n                            <Button onClick={web3Handler} variant=\"outline-light\">Connect Wallet</Button>\n                        )}\n                    </Nav>\n                </Navbar.Collapse>\n            </Container>\n        </Navbar>\n    )\n\n}\n\nexport default Navigation;","import React from 'react'\nimport { useState, useEffect } from 'react'\nimport { ethers, utils } from \"ethers\"\nimport { Row, Col, Card, Button, Form } from 'react-bootstrap'\nimport { Contract } from '@ethersproject/contracts'\nimport ABI from \"../WETH/ABI.json\"\n\nconst moment = require('moment')\n\nconst Home = ({ marketplace }) => {\n    const [loading, setLoading] = useState(true)\n    const [listings, setListings] = useState([])\n    const [bid, setBid] = useState(null)\n    const [signer, setSigner] = useState()\n    const loadMarketplaceListings = async () => {\n        // Load all active listings \n        let listingCount = await marketplace.listingCount()\n        listingCount = listingCount.toNumber()\n        let listings = []\n        for (let i = 1; i <= listingCount; i++) {\n            const listing = await marketplace.listings(i)\n            if (listing.auctionState.eq(1)) {\n                const nftResponse = await fetch(`https://api-rinkeby.etherscan.io/api?module=contract&action=getabi&address=${listing.nft}&apikey=DCV4PCHFIVVYWR83CS48C4J45C9IH8SV93`)\n\n                const nftMetadata = await nftResponse.json()\n                const nftAbi = nftMetadata.result\n\n                // Get provider from Metamask\n                const provider = new ethers.providers.Web3Provider(window.ethereum)\n                // Set signer\n                const signer = provider.getSigner()\n                setSigner(signer)\n                const nft = new Contract(listing.nft, nftAbi, signer)\n                // get uri url from nft contract\n                let uri = await nft.tokenURI(listing.tokenId)\n                uri = uri.replace(\"ipfs://\", \"https://ipfs.io/ipfs/\")\n                // use uri to fetch the nft metadata stored on ipfs \n\n                const response = await fetch(uri)\n\n                const metadata = await response.json()\n                let image = metadata.image\n                image = image.replace('ipfs://', 'https://ipfs.io/ipfs/')\n                // Convert time \n                let convertedTime = moment.unix(listing.closingTime)\n                // Convert Price\n                let price = parseFloat(ethers.utils.formatUnits(listing.currentPrice, 18))\n                // push to array\n                listings.push({\n                    price: price,\n                    listingId: listing.listingId,\n                    seller: listing.seller,\n                    name: metadata.name,\n                    description: metadata.description,\n                    image: image,\n                    time: convertedTime\n                })\n            }\n        }\n        setLoading(false)\n        setListings(listings)\n    }\n\n\n\n    const bidOnListing = async (listing, bidPrice) => {\n        const wethAddress = '0xc778417E063141139Fce010982780140Aa0cD5Ab'\n        const weth = new ethers.Contract(wethAddress, ABI, signer)\n        let adjustedPrice = utils.parseEther(bidPrice.toString())\n        await (await weth.approve(marketplace.address, adjustedPrice)).wait()\n        await (await marketplace.bid(listing.listingId, adjustedPrice.toString())).wait()\n        loadMarketplaceListings()\n    }\n\n    useEffect(() => {\n        loadMarketplaceListings()\n    }, [])\n\n\n    if (loading) return (\n        <main style={{ padding: \"1rem 0\" }}>\n            <h2>Loading...</h2>\n        </main>\n    )\n    return (\n        <div className=\"flex justify-center\">\n            {listings.length > 0 ?\n                <div className=\"px-5 container\">\n                    <h2 className='mt-4'>NFT Listings</h2>\n                    <p>When bidding, metamask will prompt for confirmation TWICE, accept both to bid</p>\n                    <Row xs={1} md={2} lg={4} className=\"g-4 py-5\">\n                        {listings.map((listing, idx) => (\n                            <Col key={idx} className=\"overflow-hidden\">\n                                <Card>\n                                    <Card.Img variant=\"top\" src={listing.image} />\n                                    <Card.Body color=\"secondary\">\n                                        <Card.Title>Price: {listing.price} wETH</Card.Title>\n                                        <Card.Text>\n                                            Name:{listing.name}\n                                        </Card.Text>\n                                        <Card.Text>Desc: {listing.description}</Card.Text>\n                                        {Date.now() < listing.time &&\n                                            <Card.Text>Closing Time: {moment(listing.time).format('lll')}</Card.Text>\n                                        }\n                                    </Card.Body>\n                                    {Date.now() < listing.time ?\n                                        <Card.Footer>\n                                            <div className='d-grid'>\n                                                <Form.Control onChange={(e) => setBid(e.target.value)} size=\"lg\" required type=\"number\" placeholder=\"Bid Amount\" />\n                                                <Form.Text className='text-muted'>Price in wETH</Form.Text>\n                                                <Button onClick={() => bidOnListing(listing, bid)} variant=\"primary\" size=\"lg\">\n                                                    Bid Now!\n                                                </Button>\n                                            </div>\n                                        </Card.Footer> :\n\n                                        <Card.Footer>\n                                            <Card.Text>Listing Ended</Card.Text>\n                                        </Card.Footer>\n\n                                    }\n\n                                </Card>\n                            </Col>\n                        ))}\n                    </Row>\n                </div>\n                : (\n                    <main style={{ padding: \"1rem 0\" }}>\n                        <h2>No Open Auctions</h2>\n                    </main>\n                )}\n        </div>\n    );\n}\n\nexport default Home\n\n","import React from 'react'\nimport { useState } from 'react'\nimport { ethers, utils } from \"ethers\"\nimport { Row, Form, Button } from 'react-bootstrap'\nimport { Contract } from '@ethersproject/contracts'\n\n\nconst Create = ({ marketplace }) => {\n    const [reserve, setReserve] = useState(null)\n    const [name, setName] = useState('')\n    const [description, setDescription] = useState('')\n    const [startPrice, setStartPrice] = useState(0)\n    const [closing, setClosing] = useState(1)\n    const [nft, setNft] = useState('')\n    const [tokenId, setTokenId] = useState(0)\n\n    const createListing = async () => {\n        if (!name || !description || !reserve || !tokenId) return\n        // Fetch NFT info\n        const response = await fetch(`https://api-rinkeby.etherscan.io/api?module=contract&action=getabi&address=${nft}&apikey=DCV4PCHFIVVYWR83CS48C4J45C9IH8SV93`)\n        const metadata = await response.json()\n        const nftAbi = metadata.result\n        // Get provider from Metamask\n        const provider = new ethers.providers.Web3Provider(window.ethereum)\n        // Set signer\n        const signer = provider.getSigner()\n        const nftInstance = new Contract(nft, nftAbi, signer)\n        // Convert prices to wei\n        const reserveAsWei = utils.parseEther(reserve.toString())\n        const startPriceAsWei = utils.parseEther(startPrice.toString())\n        await (await nftInstance.setApprovalForAll(marketplace.address, true)).wait()\n        await (await marketplace.createListing(reserveAsWei, startPriceAsWei, closing, tokenId, nft)).wait()\n    }\n\n    return (\n        <div className=\"container-fluid mt-5\">\n            <div className=\"row\">\n                <main role=\"main\" className=\"col-lg-12 mx-auto\" style={{ maxWidth: '1000px' }}>\n                    <div className=\"content mx-auto\">\n                        <h1 className='text-center my-2' > Create an Auction Listing</h1>\n                        <p>Once you submit the form metamask will prompt for confirmation TWICE. Accept both to list your NFT </p>\n                        <Row className=\"g-4\">\n                            <Form.Control onChange={(e) => setName(e.target.value)} size=\"lg\" required type=\"text\" placeholder=\"Name\" />\n                            <Form.Control onChange={(e) => setNft(e.target.value)} size=\"lg\" required type=\"text\" placeholder=\"NFT Contract\" />\n                            <Form.Control onChange={(e) => setTokenId(e.target.value)} size=\"lg\" required type=\"number\" placeholder=\"NFT Token ID\" />\n                            <Form.Control onChange={(e) => setDescription(e.target.value)} size=\"lg\" required as=\"textarea\" placeholder=\"Description\" />\n                            <Form.Control onChange={(e) => setReserve(e.target.value)} size=\"lg\" required type=\"number\" placeholder=\"Reserve price wETH\" />\n                            <Form.Control onChange={(e) => setStartPrice(e.target.value)} size=\"lg\" required type=\"number\" placeholder=\"Starting price in wETH\" />\n                            <Form.Control onChange={(e) => setClosing(e.target.value)} size=\"lg\" required type=\"number\" placeholder=\"Auction Length in Days\" />\n                            <div className=\"d-grid px-0\">\n                                <Button onClick={createListing} variant=\"primary\" size=\"lg\">\n                                    List your item for auction!\n                                </Button>\n                            </div>\n                        </Row>\n                    </div>\n                </main>\n            </div>\n        </div>\n    );\n}\n\nexport default Create\n","import { useState, useEffect } from 'react'\nimport { ethers } from \"ethers\"\nimport { Row, Col, Card, Button } from 'react-bootstrap'\nimport React from 'react'\nimport { Contract } from '@ethersproject/contracts'\n\nconst moment = require('moment')\n\n\nfunction renderSoldListings(listings) {\n    return (\n        <>\n            <h2>Sold NFTs</h2>\n            <Row xs={1} md={2} lg={4} className=\"g-4 py-3\">\n                {listings.map((listing, idx) => (\n                    <Col key={idx} className=\"overflow-hidden\">\n                        <Card>\n                            <Card.Img variant=\"top\" src={listing.image} />\n                            <Card.Text>For {listing.price} wETH</Card.Text>\n                            <Card.Footer>\n                                <Card.Text>Closing Time: {moment(listing.time).format('lll')}</Card.Text>\n                            </Card.Footer>\n                        </Card>\n                    </Col>\n                ))}\n            </Row>\n        </>\n    )\n}\n\nexport default function MyListings({ marketplace, account }) {\n    const [loading, setLoading] = useState(true)\n    const [listings, setListings] = useState([])\n    const [soldListings, setSoldListings] = useState([])\n\n    const endAuction = async (listing) => {\n        await (await marketplace.endAuction(listing.listingId)).wait()\n        loadMyListings()\n    }\n\n    const cancelAuction = async (listing) => {\n        await (await marketplace.cancelListing(listing.listingId)).wait()\n        loadMyListings()\n    }\n\n    const loadMyListings = async () => {\n        // Load all sold items that the user listed\n        let listingCount = await marketplace.listingCount()\n        listingCount = listingCount.toNumber()\n        let allListings = []\n        let soldListings = []\n        for (let indx = 1; indx <= listingCount; indx++) {\n            const i = await marketplace.listings(indx)\n            if (i.seller.toLowerCase() === account) {\n                // instantiate NFT contract of listing\n                const nftResponse = await fetch(`https://api-rinkeby.etherscan.io/api?module=contract&action=getabi&address=${i.nft}&apikey=DCV4PCHFIVVYWR83CS48C4J45C9IH8SV93`)\n                const nftMetadata = await nftResponse.json()\n                const nftAbi = nftMetadata.result\n                // Get provider from Metamask\n                const provider = new ethers.providers.Web3Provider(window.ethereum)\n                // Set signer\n                const signer = provider.getSigner()\n                const nft = new Contract(i.nft, nftAbi, signer)\n                // get uri url from nft contract\n                let uri = await nft.tokenURI(i.tokenId)\n                uri = uri.replace(\"ipfs://\", \"https://ipfs.io/ipfs/\")\n                // use uri to fetch the nft metadata stored on ipfs \n                const response = await fetch(uri)\n                const metadata = await response.json()\n                // format price and image \n                let currentPrice = i.currentPrice\n                currentPrice = parseFloat(ethers.utils.formatUnits(currentPrice, 18))\n                let reservePrice = i.reservePrice\n                reservePrice = parseFloat(ethers.utils.formatUnits(reservePrice, 18))\n                let image = metadata.image\n                image = image.replace('ipfs://', 'https://ipfs.io/ipfs/')\n                // Get Listing time and convert\n                let convertedTime = moment.unix(i.closingTime)\n                //convertedTime = convertedTime.toString()\n                // Convert AuctionState to Int\n                let auctionState = i.auctionState\n                auctionState = auctionState.toNumber()\n                // define listed item object\n                let listing = {\n                    price: currentPrice,\n                    listingId: i.listingId,\n                    name: metadata.name,\n                    description: metadata.description,\n                    image: image,\n                    auctionState: auctionState,\n                    time: convertedTime,\n                    reserve: reservePrice,\n                    bidCount: i.bidCounter.toNumber()\n                }\n                allListings.push(listing)\n                // Add listed item to sold items array if sold\n                if (auctionState === 2) soldListings.push(listing)\n            }\n        }\n        setLoading(false)\n        setListings(allListings)\n        setSoldListings(soldListings)\n    }\n    useEffect(() => {\n        loadMyListings()\n    }, [])\n    if (loading) return (\n        <main style={{ padding: \"1rem 0\" }}>\n            <h2>Loading...</h2>\n        </main>\n    )\n    return (\n        <div className=\"flex justify-center\">\n            {listings.length > 0 ?\n                <div className=\"px-5 py-3 container\">\n                    <h2>All Listings</h2>\n                    <Row xs={1} md={2} lg={4} className=\"g-4 py-3\">\n                        {listings.map((listing, idx) => (\n                            <Col key={idx} className=\"overflow-hidden\">\n                                {((Date.now() < listing.time) && (listing.auctionState !== 2)) ?\n                                    <Card>\n                                        <Card.Img variant=\"top\" src={listing.image} />\n                                        <Card.Footer>\n                                            <Card.Text>Auction Running</Card.Text>\n                                            <Card.Text>Current Price: {listing.price} wETH</Card.Text>\n                                            <Card.Text>Closing Time: {moment(listing.time).format('lll')}</Card.Text>\n                                            <Card.Text>Bid Count: {listing.bidCount}</Card.Text>\n                                            <Button onClick={() => cancelAuction(listing)} variant=\"warning\" size=\"sm\" className='m-2'>\n                                                Cancel Auction and Return NFT\n                                            </Button>\n                                        </Card.Footer>\n                                    </Card>\n                                    : listing.auctionState === 1 ?\n                                        <Card>\n                                            <Card.Img variant=\"top\" src={listing.image} />\n                                            <Card.Footer>\n                                                <Card.Text>Auction Time Elapsed</Card.Text>\n                                                <Card.Text>Final Price: {listing.price} wETH</Card.Text>\n                                                <Card.Text>Bid Count: {listing.bidCount}</Card.Text>\n                                                {listing.price >= listing.reserve &&\n                                                    <Button onClick={() => endAuction(listing)} variant=\"success\" size=\"sm\" className='m-2'>\n                                                        Finalize and Collect Payment\n                                                    </Button>\n                                                }\n                                                <Button onClick={() => cancelAuction(listing)} variant=\"warning\" size=\"sm\" className='m-2'>\n                                                    Cancel Auction and Return NFT\n                                                </Button>\n                                            </Card.Footer>\n                                        </Card>\n                                        : listing.auctionState === 3 ?\n                                            <Card>\n                                                <Card.Img variant=\"top\" src={listing.image} />\n                                                <Card.Footer>\n                                                    <Card.Text>Auction Reverted</Card.Text>\n                                                    <Card.Text>Final Price: {listing.price} wETH</Card.Text>\n                                                    <Card.Text>Bid Count: {listing.bidCount}</Card.Text>\n                                                    <Button onClick={() => cancelAuction(listing)} variant=\"warning\" size=\"sm\" className='m-2'>\n                                                        Cancel Auction and Return NFT\n                                                    </Button>\n                                                </Card.Footer>\n                                            </Card>\n                                            :\n                                            <Card>\n                                                <Card.Img variant=\"top\" src={listing.image} />\n                                                <Card.Footer>\n                                                    <Card.Text>Auction Finalized</Card.Text>\n                                                    <Card.Text>Bid Count: {listing.bidCount}</Card.Text>\n                                                    <Card.Text>Final Price: {listing.price} wETH</Card.Text>\n                                                </Card.Footer>\n                                            </Card>\n                                }\n                            </Col>\n                        ))}\n                    </Row>\n                    {soldListings.length > 0 && renderSoldListings(soldListings)}\n                </div>\n                : (\n                    <main style={{ padding: \"1rem 0\" }}>\n                        <h2>No listed assets</h2>\n                    </main>\n                )}\n        </div>\n    );\n}\n\n","import React from 'react'\nimport { useState, useEffect } from 'react'\nimport { ethers } from \"ethers\"\nimport { Row, Col, Card } from 'react-bootstrap'\nimport { Contract } from '@ethersproject/contracts'\n\nconst moment = require('moment')\n\nexport default function MyBids({ marketplace, account }) {\n    const [loading, setLoading] = useState(true)\n    const [bids, setBids] = useState([])\n    const loadBids = async () => {\n        let listingCount = await marketplace.listingCount()\n        listingCount = listingCount.toNumber()\n        let bids = []\n        for (let indx = 1; indx <= listingCount; indx++) {\n            const i = await marketplace.listings(indx)\n            if (i.buyer.toLowerCase() === account) {\n                // instantiate NFT contract of listing\n                const nftResponse = await fetch(`https://api-rinkeby.etherscan.io/api?module=contract&action=getabi&address=${i.nft}&apikey=DCV4PCHFIVVYWR83CS48C4J45C9IH8SV93`)\n                const nftMetadata = await nftResponse.json()\n                const nftAbi = nftMetadata.result\n                // Get provider from Metamask\n                const provider = new ethers.providers.Web3Provider(window.ethereum)\n                // Set signer\n                const signer = provider.getSigner()\n                const nft = new Contract(i.nft, nftAbi, signer)\n                // get uri url from nft contract\n                let uri = await nft.tokenURI(i.tokenId)\n                uri = uri.replace(\"ipfs://\", \"https://ipfs.io/ipfs/\")\n                // use uri to fetch the nft metadata stored on ipfs \n                const response = await fetch(uri)\n                const metadata = await response.json()\n                // format price and image \n                let currentPrice = i.currentPrice\n                currentPrice = parseFloat(ethers.utils.formatUnits(currentPrice, 18))\n                let image = metadata.image\n                image = image.replace('ipfs://', 'https://ipfs.io/ipfs/')\n                // Get Listing time and convert\n                let convertedTime = moment.unix(i.closingTime)\n                // Convert AuctionState to Int\n                let auctionState = i.auctionState\n                auctionState = auctionState.toNumber()\n                // define listed item object\n                let listing = {\n                    price: currentPrice,\n                    listingId: i.listingId,\n                    name: metadata.name,\n                    description: metadata.description,\n                    image: image,\n                    auctionState: auctionState,\n                    time: convertedTime\n                }\n                bids.push(listing)\n            }\n        }\n        setLoading(false)\n        setBids(bids)\n    }\n    useEffect(() => {\n        loadBids()\n    }, [])\n    if (loading) return (\n        <main style={{ padding: \"1rem 0\" }}>\n            <h2>Loading...</h2>\n        </main>\n    )\n    return (\n        <div className=\"flex justify-center\">\n            {bids.length > 0 ?\n                <div className=\"px-5 container\">\n                    <h2>Your Bids</h2>\n                    <Row xs={1} md={2} lg={4} className=\"g-4 py-5\">\n                        {bids.map((listing, idx) => (\n                            <Col key={idx} className=\"overflow-hidden\">\n                                <Card>\n                                    <Card.Img variant=\"top\" src={listing.image} />\n                                    {Date.now() < listing.time ?\n                                        <Card.Footer>\n                                            <Card.Title>Auction Running</Card.Title>\n                                            <Card.Text>Current Price: {listing.price} wETH</Card.Text>\n                                            <Card.Text>Closing Time: {moment(listing.time).format('lll')}</Card.Text>\n                                        </Card.Footer>\n                                        :\n                                        <Card.Footer>\n                                            <Card.Title>Auction Completed</Card.Title>\n                                            <Card.Text>Final Price: {listing.price} wETH</Card.Text>\n                                            <Card.Text>You Won This Auction!</Card.Text>\n                                        </Card.Footer>\n                                    }\n                                </Card>\n                            </Col>\n                        ))}\n                    </Row>\n                </div>\n                : (\n                    <main style={{ padding: \"1rem 0\" }}>\n                        <h2>No Active Bids</h2>\n                    </main>\n                )}\n        </div>\n    );\n}\n","import {\n    BrowserRouter,\n    Routes,\n    Route\n} from \"react-router-dom\";\nimport Navigation from './components/Navbar';\nimport Home from './components/Home.js'\nimport Create from './components/Create.js'\nimport MyListedItems from './components/MyListedItems.js'\nimport MyPurchases from './components/MyPurchases.js'\nimport networkMapping from \"./artifacts/deployments/map.json\"\nimport { useState } from 'react'\nimport { ethers } from \"ethers\"\nimport { Spinner } from 'react-bootstrap'\nimport React from 'react'\nimport Marketplace from './artifacts/contracts/Marketplace.json'\nimport { utils } from 'ethers'\n\nimport './App.css';\n\nfunction App() {\n    const [loading, setLoading] = useState(true)\n    const [account, setAccount] = useState(null)\n    const [marketplace, setMarketplace] = useState({})\n    // MetaMask Login/Connect\n    const web3Handler = async () => {\n        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n        setAccount(accounts[0])\n        // Get provider from Metamask\n        const provider = new ethers.providers.Web3Provider(window.ethereum)\n        // Set signer\n        const signer = provider.getSigner()\n\n        window.ethereum.on('chainChanged', (chainId) => {\n            window.location.reload();\n        })\n\n        window.ethereum.on('accountsChanged', async function (accounts) {\n            setAccount(accounts[0])\n            await web3Handler()\n        })\n        loadContracts(signer, provider)\n    }\n    const loadContracts = async (signer, provider) => {\n        // Get Address and ABI of Marketplace\n        const { abi } = Marketplace\n        const marketplaceAddress = networkMapping['4'][\"Marketplace\"][0]\n        const marketplaceInterface = new utils.Interface(abi)\n        // Get deployed copies of contracts\n        const marketplace = new ethers.Contract(marketplaceAddress, marketplaceInterface, signer)\n        setMarketplace(marketplace)\n        setLoading(false)\n    }\n\n    return (\n        <BrowserRouter>\n            <div className=\"App\">\n                <>\n                    <Navigation web3Handler={web3Handler} account={account} />\n                </>\n                <h1 className='mt-2'>dEbay NFT Auction</h1>\n                <p> This project is deployed to the Rinkeby test net, please set your metamask accordingly</p>\n                <a href='https://github.com/Brar-Paul/dEbay'>Link to GitHub Repo</a> <br />\n                <a href='https://faucets.chain.link/'>Rinkeby Faucet</a>\n                <div>\n                    {loading ? (\n                        <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '80vh' }}>\n                            <Spinner animation=\"border\" style={{ display: 'flex' }} />\n                            <p className='mx-3 my-0'>Awaiting Metamask Connection...</p>\n                        </div>\n                    ) : (\n                        <Routes>\n                            <Route path=\"/dEbay\" element={\n                                <Home marketplace={marketplace} />\n                            } />\n                            <Route path=\"/dEbay/create\" element={\n                                <Create marketplace={marketplace} />\n                            } />\n                            <Route path=\"/dEbay/my-listed-items\" element={\n                                <MyListedItems marketplace={marketplace} account={account} />\n                            } />\n                            <Route path=\"/dEbay/my-purchases\" element={\n                                <MyPurchases marketplace={marketplace} account={account} />\n                            } />\n                        </Routes>\n                    )}\n                </div>\n            </div>\n        </BrowserRouter>\n\n    );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { render } from \"react-dom\";\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.css'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst rootElement = document.getElementById(\"root\");\nrender(<App />, rootElement);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}